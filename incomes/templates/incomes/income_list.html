{% extends 'main/base.html' %}
{% load static %}
{% load tags %}

{% block content %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center">
    <h2 class="h2">Последние добавленные доходы</h2>
    <div>
        <a href="{% url 'incomes:incomes_create' %}" class="btn btn-primary">Добавить доход</a>
    </div>
</div>

{% include 'main/chart.html' %}

<h4 class="mt-4">Ваши доходы</h4>
<div class="table-responsive">
    <table class="table table-striped table-sm">
        <thead>
        <tr>
            <th>Операция</th>
            <th>Сумма</th>
            <th>Дата</th>
            <th>Источник</th>
            <th>Категория</th>
            <th>Действие</th>
        </tr>
        </thead>
        <tbody>
        {% for income in incomes %}
        <tr>

            <td>Доход</td>
            <td>{{ income.amount }}</td>
            <td>{{ income.date }}</td>
            <td>{{ income.source }}</td>
            <td>{{ income.category }}</td>
            <td>
                <a href="{% url 'incomes:incomes_detail' income.pk %}" class="btn btn-info btn-sm" title="Детали">
                    <i class="fas fa-eye"></i>
                </a>
                <a href="{% url 'incomes:incomes_update' income.pk %}" class="btn btn-warning btn-sm" title="Редактировать">
                    <i class="fas fa-edit"></i>
                </a>
                <form action="{% url 'incomes:incomes_delete' income.pk %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger btn-sm" title="Удалить" onclick="return confirm('Вы уверены, что хотите удалить этот доход?');">
                        <i class="fas fa-trash"></i>
                    </button>
                </form>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">Нет доходов для отображения.</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
